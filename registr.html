<!DOCTYPE html>
<html class="server.py" lang="com">
    <head>
        <meta charset="UTF-8"> 
        <title>Create account</title>
        <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
        <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
    </head>
<form>
    <label for="username">Name</label>
    <input type="text" id="username" name="username">
    <label for="pasword">Password</label>
    <input type="password" id="password" name="password">
    <a href="content.html">
        <py-script>
        from django.shortcuts import render
from .forms import Signupform, Loginform
from django.contrib.auth.models import User
from django.contrib.auth import authenticate, login

def pagelogin(request):

    uservalue=''
    passwordvalue=''

    form= Loginform(request.POST or None)
    if form.is_valid():
        uservalue= form.cleaned_data.get("username")
        passwordvalue= form.cleaned_data.get("password")

        user= authenticate(username=uservalue, password=passwordvalue)
        if user is not None:
            login(request, user)
            context= {'form': form,
                      'error': 'The login has been successful'}
           
            return render(request, 'index.html', context)
        else:
            context= {'form': form,
                      'error': 'The username and password combination is incorrect'}
            
            return render(request, 'index.html', context )

    else:
        context= {'form': form}
        return render(request, 'index.html', context)
</py-script>    
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        Login to account
</form>
</html>
